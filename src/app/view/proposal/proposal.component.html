<!-- main start here-->
<main id="main">
    <section class="inner-page p-0 sec_body">
        <div class="container-fluid ">
            <div class="row">
                <div class="col-12 middle">
                    <!--sidebarTop start here-->
                    <app-sidebar></app-sidebar>
                    <!--sidebarTop end here-->
                    <!-- select category start here -->

                    <!-- select category end here -->
                    <!-- ======= Breadcrumbs ======= -->
                    <section class="col-10 breadcrumbs bredcrumb_top">
                        <div class=" ">
                            <div class="d-flex justify-content-between align-items-center">
                                <ol class="breadcrumb  card_partd">
                                    <li class="breadcrumb-item active"><a href="order">My Account</a></li>
                                    <li class="breadcrumb-item"> <a routerLink="/products" routerLinkActive="active"
                                            style="color: #c6000c">My Proposal</a></li>
                                </ol>
                            </div>
                        </div>
                    </section>
                    <!-- End Breadcrumbs -->

                    <!--  proposal start here-->
                    <div class="mt-2">
                        <div class="col-8 s0">My Proposal</div>
                    </div>
                    <div class="">
                        <div class="col-12">
                            <hr>
                        </div>
                    </div>
                    <!-- calender 1st part -->
                    <div class="row">
                        <div class="col-12 f_left button_div ">
                            <button type="button" class=" btn btn-light " routerLink="/FireAuditForYourPremises"
                               > <i class="fa fa-plus "></i>Add New Proposal</button>
                            <!-- <button class="col-10 btn btn-white dropdown-toggle   f_left side_button1 my-1 p-1 "
                                style=" width: 20%; height: 77%;" type="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Product Category
                            </button>
                            <ul class="dropdown-menu ">
                                <li><a class="dropdown-item" href="#">Pending with Ceasefire Team</a></li>
                                <li><a class="dropdown-item" href="#">View Created</a></li>
                            </ul>
                            <button class="col-10 btn btn-white dropdown-toggle   f_left side_button1 my-1 p-1 "
                                style=" width: 20%; height: 77%;" type="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Product Status
                            </button>
                            <ul class="dropdown-menu ">
                                <li><a class="dropdown-item" href="#">Fire Extinguisher</a></li>
                                <li><a class="dropdown-item" href="#">In Panel Systems</a></li>
                                <li><a class="dropdown-item" href="#">Suppresion Systems</a></li>
                            </ul> -->

                        </div>
                    </div>
                    <!-- calender 1st part -->
                    <!-- calender start here-->
                    <div class="row">
                        <div class="row button_div mt-3">
                            <button class="col-lg-2 col-md-2 col-xs-12 side_button my-1 p-1 bg_white ">
                                <input  (input)="applyFilter($any($event.target).value)" class="bg_white" [(ngModel)]="globalFilter" type="text" id="birthday"
                                 >
                            </button>
                            <button class="col-lg-2 col-md-2 col-xs-12  side_button my-1 p-1 bg_white ">
                                <input type="date" id="birthday" value="fromDate" class="bg_white" name="fromDate" [(ngModel)]="proposalSearchFilter.fromDate"
                                  >
                            </button>
                            <button class="col-lg-2 col-md-2 col-xs-12 side_button my-1 p-1 bg_white " >
                                <input type="date" id="birthday" value="toDate" class="bg_white" name="toDate"  [(ngModel)]="proposalSearchFilter.toDate"
                                 >
                            </button>

                                <select id="status" class=" dropdown-toggle col-lg-2 col-md-2 col-xs-12 side_button my-1 p-1 "  pInputText id="status"  [(ngModel)]="proposalSearchFilter.status" name="status"  (selectionChange)="getApplicationAreaSelectedData()">
                                   <option *ngFor="let segm of statusDataArray"  [value]="segm">{{segm}}</option>
                              </select>
                            <button type="button" class="col-lg-1 col-md-1 col-xs-12 btn btn-danger side_button my-1 p-1 "
                                (click)="OnSearchProposal()">Search</button>

                                <button type="button" class="col-lg-1 col-md-1 col-xs-12 btn btn-danger side_button my-1 p-1 "
                                (click)="ClearFilterProposalData()">Clear Filter</button>
                        </div>
                    </div>


                    <!-- calender end here-->
                    <div class="row col-10 mt-3" style="    margin-left: 219px;" *ngFor="let item of proposalData ">
                        <div style="height: max-content;" class=" col-12 groove">
                            <div class="col-8 main_order">
                                <p class="mt-3"> <img [src]="getImageSrc(item.productId)" width="90" height="90" alt="image" />
                                </p>
                                <p class="main_text mt-3">
                                    <span class="">Prospect Code: {{item.proposalCode}}</span>
                                    <span>Created On: {{item.createdOn | date:"dd-MMM-yyyy hh:mm a"}}</span>
                                    <span>Created By: {{item.createdBy}}</span>
                                    <span>Type Of: {{item.productType}}</span>
                                    <span> Products: {{getInpsheets(item.inpsheets)}}</span>
                                    <span> ProposalValue: {{item.proposalValue}}</span>

                                    <!-- <span>Products: {{item.inpsheets==2?'CQRS'}}</span> -->
                                    <!-- 
                                        <span *ngIf="item.inpsheets ==2">CQRS</span>
                                        <span *ngIf="item.inpsheets === 4">GSS</span>
                                        <span *ngIf="item.inpsheets === 3">KSS</span>
                                        <span *ngIf="item.inpsheets === 11">Standalone</span> -->

                                    
                                      

                                </p>
                            </div>
                            <div class="col-4">
                                <p class="main_text_1 mt-3">
                                    <span *ngIf="isCS || isDE">Proposal status: <span class="main_0"> {{item.status}}</span></span>
                                    <span *ngIf="(isCS==false && isDE==false) && (item.status=='Pending with Design Cell' || item.status=='BOQ in Progress'  ||item.proposalStatus=='Pending With Design Head') ">Proposal status: <span class="main_0">Pending With Customer Support</span></span>
                                    <span *ngIf="(isCS==false && isDE==false) && (item.status=='Completed Proposal' || item.status=='Submitted To Client'  || item.status=='Incomplete Input Sheet' ||  item.status=='Pending With Customer Support')">Proposal status: <span class="main_0">{{item.status}}</span></span>


                                    <!-- <span>Qty:6</span> -->
                                    <!-- <span class="main_p"> &#8377; 270.4</span> -->
                                </p>
                                <p class="main_text_b mt-4">
                                    <button  type="button" class="btn btn-outline-primary btn_1" style="margin-right: 10px;" (click)="routeToProposal(item)">View</button>
                                    <button *ngIf="item.status=='Received From Design Cell '|| item.status=='Completed Proposal' || item.status=='Submitted To Client' " type="button" class="btn btn-outline-primary btn_1" style="margin-right: 10px;"  (click)="routeToProposalSummary(item)">View Summary</button>
                                    <button *ngIf="item.status=='Received From Design Cell '|| item.status=='Completed Proposal' || item.status=='Submitted To Client' " type="button" class="btn btn-outline-primary btn_1" style="margin-right: 10px;"  (click)="routeToOrder(item)">Process Order</button>
                                    <button *ngIf=" (item.status=='Completed Proposal' || item.status=='Submitted To Client') && (ApiService.getCSEmpCode() || ApiService.getDE())" type="button" class="btn btn-outline-primary btn_1" (click)="onTypeOfEqChange($any($event.target).value,content, item)">Submit To Client</button>

                                    <!-- <button type="button" class="btn btn-danger btn_1"><i
                                            style="font-size:11px"></i>Remove</button>
                                    <button type="button" class="btn btn-success btn_1"><i class="fa fa-shopping-cart"
                                            style="font-size:12px; margin-right: 4px;"></i>Add To Card</button> -->
                            </div>
                        </div>
                    </div>

                    <!-- <div class="row mt-3">
                        <div class=" col-12 groove">
                            <div class="col-8 main_order">
                                <p class="mt-3"> <img src="/assets/img8.jpg" width="90" height="90" alt="image" />
                                </p>
                                <p class="main_text mt-3">
                                    <span class="main_0">Prospect Code: PS125756</span>
                                    <span>Created On:03-Dec-2023 06:07 PM</span>
                                    <span>Created By:Zulquar Nain</span>
                                    <span>Type Of:Standalone</span>
                                </p>
                            </div>
                            <div class="col-4">
                                <p class="main_text_1 mt-3">
                                    <span>proposal status: <span class="main_0">Pending With Design Team</span></span>
                                    <span>Qty:6</span>
                                    <span class="main_p"> &#8377; 270.4</span>
                                </p>
                                <p class="main_text_b mt-4">
                                    <button type="button" class="btn btn-outline-primary btn_1">Edit</button>
                                    <button type="button" class="btn btn-danger btn_1"><i
                                            style="font-size:11px"></i>Remove</button>
                                    <button type="button" class="btn btn-success btn_1"><i class="fa fa-shopping-cart"
                                            style="font-size:12px; margin-right: 4px;"></i>Add To Card</button>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class=" col-12 groove">
                            <div class="col-8 main_order">
                                <p class="mt-3"> <img src="/assets/img8.jpg" width="90" height="90" alt="image" />
                                </p>
                                <p class="main_text mt-3">
                                    <span class="main_0">Prospect Code: PS125756</span>
                                    <span>Created On:03-Dec-2023 06:07 PM</span>
                                    <span>Created By:Zulquar Nain</span>
                                    <span>Type Of:Standalone</span>
                                </p>
                            </div>
                            <div class="col-4">
                                <p class="main_text_1 mt-3">
                                    <span>proposal status: <span class="main_0">Pending With Design Team</span></span>
                                    <span>Qty:6</span>
                                    <span class="main_p"> &#8377; 270.4</span>
                                </p>
                                <p class="main_text_b mt-4">
                                    <button type="button" class="btn btn-outline-primary btn_1">Edit</button>
                                    <button type="button" class="btn btn-danger btn_1"><i
                                            style="font-size:11px"></i>Remove</button>
                                    <button type="button" class="btn btn-success btn_1"><i class="fa fa-shopping-cart"
                                            style="font-size:12px; margin-right: 4px;"></i>Add To Card</button>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class=" col-12 groove">
                            <div class="col-8 main_order">
                                <p class="mt-3"> <img src="/assets/img8.jpg" width="90" height="90" alt="image" />
                                </p>
                                <p class="main_text mt-3">
                                    <span class="main_0">Prospect Code: PS125756</span>
                                    <span>Created On:03-Dec-2023 06:07 PM</span>
                                    <span>Created By:Zulquar Nain</span>
                                    <span>Type Of:Standalone</span>
                                </p>
                            </div>
                            <div class="col-4">
                                <p class="main_text_1 mt-3">
                                    <span>proposal status: <span class="main_0">Pending With Design Team</span></span>
                                    <span>Qty:6</span>
                                    <span class="main_p"> &#8377; 270.4</span>
                                </p>
                                <p class="main_text_b mt-4">
                                    <button type="button" class="btn btn-outline-primary btn_1">Edit</button>
                                    <button type="button" class="btn btn-danger btn_1"><i
                                            style="font-size:11px"></i>Remove</button>
                                    <button type="button" class="btn btn-success btn_1"><i class="fa fa-shopping-cart"
                                            style="font-size:12px; margin-right: 4px;"></i>Add To Card</button>
                            </div>
                        </div>
                    </div> -->
                    <!-- <div class="row mt-3">
                        <div class=" col-12 groove">
                            <div class="col-8 main_order">
                                <p class="mt-3"> <img src="/assets/img8.jpg" width="90" height="90" alt="image" />
                                </p>
                                <p class="main_text mt-3">
                                    <span class="main_0">Prospect Code: PS125756</span>
                                    <span>Created On:03-Dec-2023 06:07 PM</span>
                                    <span>Created By:Zulquar Nain</span>
                                    <span>Type Of:Standalone</span>
                                </p>
                            </div>
                            <div class="col-4">
                                <p class="main_text_1 mt-3">
                                    <span>order status: <span class="main_0">Pending With Design Team</span></span>
                                    <span>Qty:6</span>
                                    <span class="main_p"> &#8377; 270.4</span>
                                </p>
                                <p class="main_text_b mt-4">
                                    <button type="button" class="btn btn-outline-dark btn_1">Edit</button>
                                    <button type="button" class="btn btn-outline-dark btn_1"><i class="fa fa-trash-o"
                                            style="font-size:12px"></i>Remove</button>
                                    <button type="button" class="btn btn-outline-dark btn_1"><i
                                            class="fa fa-shopping-cart" style="font-size:12px"></i>Add To Card</button>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class=" col-12 groove">
                            <div class="col-8 main_order">
                                <p class="mt-3"> <img src="/assets/img8.jpg" width="90" height="90" alt="image" />
                                </p>
                                <p class="main_text mt-3">
                                    <span class="main_0">Prospect Code: PS125756</span>
                                    <span>Created On:03-Dec-2023 06:07 PM</span>
                                    <span>Created By:Zulquar Nain</span>
                                    <span>Type Of:Standalone</span>
                                </p>
                            </div>
                            <div class="col-4">
                                <p class="main_text_1 mt-3">
                                    <span>order status: <span class="main_0">Pending With Design Team</span></span>
                                    <span>Qty:6</span>
                                    <span class="main_p"> &#8377; 270.4</span>
                                </p>
                                <p class="main_text_b mt-4">
                                    <button type="button" class="btn btn-outline-dark btn_1">Edit</button>
                                    <button type="button" class="btn btn-outline-dark btn_1"><i class="fa fa-trash-o"
                                            style="font-size:12px"></i>Remove</button>
                                    <button type="button" class="btn btn-outline-dark btn_1"><i
                                            class="fa fa-shopping-cart" style="font-size:12px"></i>Add To Card</button>
                            </div>
                        </div>
                    </div> -->
                    <!-- proposal end here-->
                </div>
            </div>
            <!-- chat assistant start-->
              <!-- Chat And Quick Link Button On Right Side -->
            <!-- <app-chat-assistance></app-chat-assistance> -->
            <!-- chat assistant ends-->
            <!--  commoncode start here-->
            <div class="row">
                <app-product-recommended></app-product-recommended>
            </div>
            <!-- commoncode end here-->
        </div>
    </section>
</main>

<!-- End #main -->
<ng-template #content let-modal>
    <div class="modal-header">
        <h5 class="modal-title">Submit to client</h5>
      <button type="button" class="btn-close" aria-label="Close" (click)=" modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <!-- <p>{{modelText}}</p> -->
      <!-- <p>submit to client </p> -->
      <!-- app.component.html -->
<form (ngSubmit)="submitForm()" #contactForm="ngForm">
    <div class="form-group">
      <label for="contactPersonName" class="col-form-label ">Contact Person Name:</label>
      <input type="text" id="contactPersonName" class="form-control" name="contactPersonName" [(ngModel)]="contactPersonName" required>
    </div>
    <div class="form-group">
      <label for="email" class="col-form-label ">Email:</label>
      <input type="email" id="email" class="form-control"  name="email" [(ngModel)]="email" required>
    </div>
    <div class="col-12 pull-left mt-2 ">
        <div class="col-9 pull-left"></div>
    <div class="col-2 pull-left"> <button type="button" (click)="addContact()" class="btn btn-outline-primary btn sm">Add</button></div>
    <div class="col-1 pull-left"> <button type="button"(click)="clearForm()" class="btn btn-outline-primary btn sm">Clear</button></div>
    </div>
  </form>

  <table class="table table-bordered pull-left mt-2">
    <thead>
      <tr>
        <th>To</th>
        <th>CC</th>
        <th>Contact Person Name</th>
        <th>Email ID</th>
      </tr>
    </thead>
    <tbody>
        <tr *ngFor="let contact of contacts">
            <td><input type="checkbox" [(ngModel)]="contact.to" [disabled]="contact.cc"></td>
            <td><input type="checkbox" [(ngModel)]="contact.cc" [disabled]="contact.to"></td>
            <td>{{ contact.contactPersonName }}</td>
            <td>{{ contact.email }}</td>
          </tr>
    </tbody>
  </table>

    </div>
    <div class="modal-footer">
<button (click)="submitForm()" class="btn btn-primary btn-sm">submit</button>

    </div>
  </ng-template>

